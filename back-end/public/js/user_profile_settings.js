!function(e){var n={};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=48)}({1:function(e,n){var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e};window.getSpinner=function(e){return $("<div />").addClass("spinner spinner--"+e).append($("<div />")).append($("<div />")).append($("<div />")).append($("<div />"))},window.showSpinner=function(e){e.addClass("is-loading").prop("disabled",!0),e.append(getSpinner(30))},window.hideSpinner=function(e){e.removeClass("is-loading").prop("disabled",!1),e.find(".spinner").remove()},window.clearErrors=function(){$(".form-error").removeClass("form-error"),$(".error-text").remove()},window.showError=function(e){$.magnificPopup.open({items:{src:"#error-modal"},type:"inline",closeOnBgClick:!0,callbacks:{elementParse:function(n){$(n.src).find("#error-message").text(e)}}})},window.validateFile=function(e){var n=e.type.match(/(.png)|(.jpeg)|(.jpg)|(.pdf)$/i),o=e.size.toFixed(0)<4194304;return!(!n||!o)},window.scrollToError=function(){$("html, body").animate({scrollTop:$(".form-error:eq(0)").offset().top},500)},window.showConfirmation=function(e,n,o){$.magnificPopup.open({items:{src:"#confirmation-modal"},type:"inline",showCloseBtn:!1,closeOnBgClick:!1,callbacks:{elementParse:function(o){$(o.src).find("#confirmation-message").text(e),$(o.src).find("#accept_action").off("click").on("click",function(e){e.preventDefault(),$.magnificPopup.close(),"function"==typeof n&&n()}),$(o.src).find("#reject_action").off("click").on("click",function(e){e.preventDefault(),$.magnificPopup.close()})}}})},window.showPopover=function(e){$(".popover").remove();var n=$("<div />").addClass("popover").append($("<i />").addClass("fa fa-check-circle")).append($("<div />").addClass("popover__content").html(e)).append($("<a />").addClass("popover__close").attr("href","").html("Close").on("click",function(e){e.preventDefault(),$(".popover").remove()}));$("body").prepend(n),setTimeout(function(){n.remove()},5e3)},window.showProtectionDialog=function(e){$.magnificPopup.open({items:{src:"#protection-modal"},type:"inline",showCloseBtn:!0,closeOnBgClick:!0,callbacks:{elementParse:function(n){$(n.src).find("#frm_protection").find('input[name="signature"]').val(""),$(n.src).find("#frm_protection").off("submit").on("submit",function(n){n.preventDefault(),sessionStorage.setItem("signature",$(this).find('input[name="signature"]').val()),$.magnificPopup.close(),e()})}}})},window.processProtectionRequest=function(e,n){var t=sessionStorage.getItem("signature");if(sessionStorage.removeItem("signature"),!t){var r=(new Date).valueOf();return sessionStorage.setItem("action_timestamp",r),o({},n,{action:e,action_timestamp:r})}return o({},n,{action_timestamp:sessionStorage.getItem("action_timestamp"),signature:t})},window.processProtectionResponse=function(e,n,o){205==e?"function"==typeof n&&showProtectionDialog(n):"function"==typeof o&&o()}},48:function(e,n,o){e.exports=o(49)},49:function(e,n,o){o(1);var t=function(){$("#upload-identity-documents").trigger("reset"),$("#upload-address-documents").trigger("reset")};$(document).ready(function(){$(".remove-document").on("click",function(e){var n=this;e.preventDefault(),showConfirmation("Are you sure do you want to delete this file?",function(){var e={did:$(n).parents("li").attr("id")};axios.post("/user/profile-settings/remove-document",qs.stringify(e)).then(function(){$.magnificPopup.open({items:{src:"#remove-document-modal"},type:"inline",closeOnBgClick:!0,callbacks:{close:function(){window.location.reload()}}})}).catch(function(e){var n=e.response.data.message;showError(n)})})}),$("#upload-identity-documents").on("submit",function(e){e.preventDefault(),clearErrors();var n=new FormData,o=!0;if($.each($("#document-files")[0].files,function(e,t){if(!validateFile(t))return o=!1,!1;n.append("document_files[]",t)}),!o)return showError("Incorrect files format."),!1;var r=$(this).find('button[type="submit"]');showSpinner(r),axios.post("/user/profile-settings/upload-identity-documents",n).then(function(){hideSpinner(r),t(),$.magnificPopup.open({items:{src:"#upload-documents-modal"},type:"inline",closeOnBgClick:!0,callbacks:{close:function(){window.location.reload()}}})}).catch(function(e){hideSpinner(r);var n=e.response.data,o=n.message,t=n.errors;422==e.response.status?$.each(t,function(e,n){$("#upload-identity-documents .drag-drop-area").after($("<div />").addClass("error-text").text(n))}):showError(o)})}),$("#upload-address-documents").on("submit",function(e){e.preventDefault(),clearErrors();var n=new FormData,o=!0;if($.each($("#address-files")[0].files,function(e,t){if(!validateFile(t))return o=!1,!1;n.append("address_files[]",t)}),!o)return $(".drag-drop-area").after($("<div />").addClass("error-text").text("Incorrect files format.")),!1;var r=$(this).find('button[type="submit"]');showSpinner(r),axios.post("/user/profile-settings/upload-address-documents",n).then(function(){hideSpinner(r),t(),$.magnificPopup.open({items:{src:"#upload-documents-modal"},type:"inline",closeOnBgClick:!0,callbacks:{close:function(){window.location.reload()}}})}).catch(function(e){hideSpinner(r);var n=e.response.data,o=n.message,t=n.errors;422==e.response.status?$.each(t,function(e,n){$("#upload-address-documents .drag-drop-area").after($("<div />").addClass("error-text").text(n))}):showError(o)})}),$("#change-password").on("submit",function(e){var n=this;e.preventDefault();var o=$(this).find('input[type="submit"]');showSpinner(o),clearErrors();var t=processProtectionRequest("Change Password",{"current-password":$(this).find('input[name="current-password"]').val(),password:$(this).find('input[name="password"]').val(),password_confirmation:$(this).find('input[name="password_confirmation"]').val()});axios.post("/user/profile-settings/change-password",qs.stringify(t)).then(function(e){hideSpinner(o),processProtectionResponse(e.status,function(){$(n).trigger("submit")},function(){$('#change-password input[type="password"]').val(""),$.magnificPopup.open({items:{src:"#change-password-modal"},type:"inline",closeOnBgClick:!0})})}).catch(function(e){hideSpinner(o);var n=e.response.data,t=n.errors,r=n.message;422==e.response.status?($.each(t,function(e,n){$('#change-password input[name="'+e+'"]').parent().addClass("form-error"),$('#change-password input[name="'+e+'"]').after($("<span />").addClass("error-text").text(n))}),scrollToError()):showError(r)})}),$(".update-wallet").on("click",function(e){var n=this;if(e.preventDefault(),!$(this).parents(".wallet-address-group").find(".owner-confirm").prop("checked"))return showError("Please, confirm that you are the owner of this account"),!1;var o=processProtectionRequest("Change Wallet Address",{currency:$(this).parents(".wallet-address-group").find('input[name="wallet-currency"]').val(),address:$(this).parents(".wallet-address-group").find('input[name="wallet-address"]').val()}),t=$(this);showSpinner(t),clearErrors(),axios.post("/user/profile-settings/update-wallet",qs.stringify(o)).then(function(e){hideSpinner(t),processProtectionResponse(e.status,function(){$(n).trigger("click")},function(){$(n).parents(".wallet-address-group").find(".owner-confirm").prop("checked",!1),$.magnificPopup.open({items:{src:"#wallet-address-modal"},type:"inline",closeOnBgClick:!0})})}).catch(function(e){hideSpinner(t);var o=e.response.data.message;422==e.response.status?($(n).parents(".wallet-address-group").find('input[name="wallet-address"]').parent().addClass("form-error"),scrollToError()):showError(o)})}),$("#address-files").on("change",function(){$(".selected-address-files").remove();var e=$("<ul />").addClass("files-list selected-address-files");$.each($(this)[0].files,function(n,o){e.append($("<li />").append($("<i />").addClass("file-ico")).append($("<div />").addClass("filename").html(o.name)))}),$("#upload-address-documents .drag-drop-area").after(e)}),$("#document-files").on("change",function(){$(".selected-document-files").remove();var e=$("<ul />").addClass("files-list selected-document-files");$.each($(this)[0].files,function(n,o){e.append($("<li />").append($("<i />").addClass("file-ico")).append($("<div />").addClass("filename").html(o.name)))}),$("#upload-identity-documents .drag-drop-area").after(e)}),$("#address-files, #document-files").trigger("change"),Veriff({apiKey:"09928dac-7bea-4413-9ade-79fdd5145d01",parentId:"verify-user",onSession:function(e,n){if("success"===n.status&&void 0!==n.verification){var o={session_id:n.verification.id},t=n.verification.url;axios.post("/user/verify",qs.stringify(o)).then(function(){location.replace(t)}).catch(function(e){var n=e.response.data.message;showError(n)})}else showError("Verification failed")}}).mount()})}});