!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=46)}({1:function(e,t){var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};window.getSpinner=function(e){return $("<div />").addClass("spinner spinner--"+e).append($("<div />")).append($("<div />")).append($("<div />")).append($("<div />"))},window.showSpinner=function(e){e.addClass("is-loading").prop("disabled",!0),e.append(getSpinner(30))},window.hideSpinner=function(e){e.removeClass("is-loading").prop("disabled",!1),e.find(".spinner").remove()},window.clearErrors=function(){$(".form-error").removeClass("form-error"),$(".error-text").remove()},window.showError=function(e){$.magnificPopup.open({items:{src:"#error-modal"},type:"inline",closeOnBgClick:!0,callbacks:{elementParse:function(t){$(t.src).find("#error-message").text(e)}}})},window.validateFile=function(e){var t=e.type.match(/(.png)|(.jpeg)|(.jpg)|(.pdf)$/i),n=e.size.toFixed(0)<4194304;return!(!t||!n)},window.scrollToError=function(){$("html, body").animate({scrollTop:$(".form-error:eq(0)").offset().top},500)},window.showConfirmation=function(e,t,n){$.magnificPopup.open({items:{src:"#confirmation-modal"},type:"inline",showCloseBtn:!1,closeOnBgClick:!1,callbacks:{elementParse:function(n){$(n.src).find("#confirmation-message").text(e),$(n.src).find("#accept_action").on("click",function(e){e.preventDefault(),$.magnificPopup.close(),"function"==typeof t&&t()}),$(n.src).find("#reject_action").on("click",function(e){e.preventDefault(),$.magnificPopup.close()})}}})},window.showPopover=function(e){$(".popover").remove();var t=$("<div />").addClass("popover").append($("<i />").addClass("fa fa-check-circle")).append($("<div />").addClass("popover__content").html(e)).append($("<a />").addClass("popover__close").attr("href","").html("Close").on("click",function(e){e.preventDefault(),$(".popover").remove()}));$("body").prepend(t),setTimeout(function(){t.remove()},5e3)},window.showProtectionDialog=function(e){$.magnificPopup.open({items:{src:"#protection-modal"},type:"inline",showCloseBtn:!0,closeOnBgClick:!0,callbacks:{elementParse:function(t){$(t.src).find("#frm_protection").find('input[name="signature"]').val(""),$(t.src).find("#frm_protection").off("submit").on("submit",function(t){t.preventDefault(),sessionStorage.setItem("signature",$(this).find('input[name="signature"]').val()),$.magnificPopup.close(),e()})}}})},window.processProtectionRequest=function(e,t){var o=sessionStorage.getItem("signature");if(sessionStorage.removeItem("signature"),!o){var r=(new Date).valueOf();return sessionStorage.setItem("action_timestamp",r),n({},t,{action:e,action_timestamp:r})}return n({},t,{action_timestamp:sessionStorage.getItem("action_timestamp"),signature:o})},window.processProtectionResponse=function(e,t,n){205==e?"function"==typeof t&&showProtectionDialog(t):"function"==typeof n&&n()}},46:function(e,t,n){e.exports=n(47)},47:function(e,t,n){n(1),$(document).ready(function(){$('select[name="country"]').on("change",function(e){var t=$(this).val();axios.get("/user/states",{params:{country:t}}).then(function(e){$('select[name="state"]').html(e.data.states.map(function(e){return $("<option />").val(e.id).text(e.name).attr("selected",0==e.id?"selected":"")})),$('select[name="area-code"]').html(e.data.codes.map(function(e){return $("<option />").val(e.id).text(e.code).attr("selected",0==e.id?"selected":"")}))}).catch(function(){$('select[name="state"]').html($("<option />").val(0).text("Other state").attr("selected","selected")),$('select[name="area-code"]').html($("<option />").val(0).text("Other code").attr("selected","selected"))})}),$("#save-profile").on("click",function(e){var t=this;e.preventDefault();var n=$(this);showSpinner(n),clearErrors();var o=processProtectionRequest("Save Profile",{first_name:$('input[name="f-name"]').val(),last_name:$('input[name="l-name"]').val(),email:$('input[name="email"]').val(),phone_number:$('input[name="tel"]').val(),area_code:$('select[name="area-code"]').val(),country:$('select[name="country"]').val(),state:$('select[name="state"]').val(),city:$('input[name="city"]').val(),address:$('input[name="address"]').val(),postcode:$('input[name="post-code"]').val(),passport:$('input[name="government"]').val(),expiration_date:$('input[name="expiry"]').val(),birth_date:$('input[name="birth"]').val(),birth_country:$('select[name="country-birth"]').val()});axios.post("/user/profile",qs.stringify(o)).then(function(e){hideSpinner(n),processProtectionResponse(e.status,function(){$(t).trigger("click")},function(){$.magnificPopup.open({items:{src:"#profile-modal"},type:"inline",closeOnBgClick:!0})})}).catch(function(e){hideSpinner(n);var t=e.response.data,o=t.errors,r=t.message;422==e.response.status?($.each(o,function(e,t){$(".profile_"+e).addClass("form-error"),$(".profile_"+e).after($("<span />").addClass("error-text").text(t))}),scrollToError()):showError(r)})})})}});